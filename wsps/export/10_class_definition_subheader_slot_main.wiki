<noinclude>

This is the '''Class definition subheader''' template. It should be called in the following format:

<pre>
{{Class definition subheader }}
</pre>

</noinclude><includeonly>__NOTOC__<!--

-->{{#af_foreach:{{#invoke:ClassDefinitionData|afExport}}||$data|<!--

--><h2>Class</h2>
<p>'''{{#af_get:{{{$data}}}|csp-class-props|Csp class properties|1|Defines class|_text}}''' with pagetitle format {{#af_get:{{{$data}}}|var|pagetitleFormat}}</p><!--
-->{{#if:{{#af_get:{{{$data}}}|csp-class-props|Csp class properties|1|Allowed namespaces|_text}} |<p>Allowed namespaces:</p>
<ul>{{#af_join:{{#af_map:{{#af_split:{{#af_get:{{{$data}}}|csp-class-props|Csp class properties|1|Allowed namespaces|_text}}|,}}|@@|<li>{{{@@}}}</li>}}|\n}}</ul>
}}<!--
-->{{#if:{{#af_get:{{{$data}}}|csp-class-props|Csp class properties|1|Short description|_text}}|<p>{{#af_get:{{{$data}}}|csp-class-props|Csp class properties|1|Short description|_text}}</p> }}<!--
--><p>Has version history: {{#ifeq:{{#af_get:{{{$data}}}|csp-class-props|Csp class properties|1|Has version history|_text}}|true |'''true''' |false}}</p>

<h2>Layout</h2>
* Areas : {{#af_get:{{{$data}}}|csp-class-props|Csp class properties|1|Layout areas|_text}}
* Columns : {{#af_get:{{{$data}}}|csp-class-props|Csp class properties|1|Layout columns|_text}}
* Rows : {{#af_get:{{{$data}}}|csp-class-props|Csp class properties|1|Layout rows|_text}}

<h2>Storage templates</h2>
* Base properties: [[{{#af_get:{{{$data}}}|var|basePropsTemplate}}]]
* Class properties: [[{{#af_get:{{{$data}}}|var|classPropsTemplate}}]]

<h2>Component templates</h2>
* Footer template: {{#if:{{#af_get:{{{$data}}}|var|footerTemplate}} |[[{{#af_get:{{{$data}}}|var|footerTemplate}}]] |(none) }}
* Sidebar template: [[{{#af_get:{{{$data}}}|var|sidebarTemplate}}]]
* Sub header template: [[{{#af_get:{{{$data}}}|var|subheaderTemplate}}]]

<div class="tab-content"><!--
--><input type="radio" id="parameter-view" name="toggle-parameter" checked="checked" class="d-none sidebar-view" /><!--
--><div class="sidebar-view-tab">
<span style="float:right"><label for="parameter-edit" class="btn btn-secondary">Edit</label></span>
<h2>Defined parameters</h2>
{{#ifeq:{{#af_get:{{{$data}}}|var|hasParameterDefinitions}}|yes|
{{{!}} class="table sortable"
! Name
! Property
! Slot
! Formfield template
! Display template
! Allowed values
! Required
! Multiple
{{#af_foreach:{{#af_get:{{{$data}}}|csp-data|CspParameterDefinitions}}||$parameter|<tr>
<td>{{#af_get:{{{$parameter}}}|name}}</td>
<td>{{#switch:{{#af_get:{{{$parameter}}}|propertyName}} 
  |(none)=(none)
  |#default=[[Property:{{#af_get:{{{$parameter}}}|propertyName}} |{{#af_get:{{{$parameter}}}|propertyName}}]] 
  }}
</td>
<td>{{#af_get:{{{$parameter}}}|slot}}</td>
<td>{{#switch:{{#af_get:{{{$parameter}}}|formfieldTemplate}} |= |(none)=(none) |#default=[[Template:{{#af_get:{{{$parameter}}}|formfieldTemplate}} |{{#af_get:{{{$parameter}}}|formfieldTemplate}}]] }}</td>
<td>{{#switch:{{#af_get:{{{$parameter}}}|displayTemplate}} |= |(none)=(none) |#default=[[Template:{{#af_get:{{{$parameter}}}|displayTemplate}} |{{#af_get:{{{$parameter}}}|displayTemplate}}]] }}</td>
<td>{{#af_get:{{{$parameter}}}|allowedValues}}</td>
<td>{{#ifeq:{{#af_get:{{{$parameter}}}|required}} |required|Yes|No}}</td>
<td>{{#ifeq:{{#af_get:{{{$parameter}}}|multiple}} |multiple|Yes|No}}</td>
<tr>
}}
{{!}}}
|''No parameters have been defined yet''
}}
</div><!-- end of .sidebar-view-tab 

--><input type="radio" id="parameter-edit" name="toggle-parameter" class="d-none sidebar-edit" /><!--
--><div class="sidebar-edit-tab"><!--
--><span style="float:right"><label for="parameter-view" class="btn btn-secondary">Close</label></span>
<h2>Edit parameters</h2>
<div class="alert alert-info">
* '''allowed values''' has different options depending on the chosen formfield template:
** '''checked value,unchecked value''' e.g "Yes,No" for [[Template:Csp formfield/checkbox]]
** '''SMW query''' e.g. "<nowiki>[[Class::Application page]]</nowiki>" for [[Template:Csp formfield/ask token]]
** '''comma-separated list''' e.g. "A,B,C" for [[Template:Csp formfield/select]] and [[Template:Csp formfield/token]]
* '''allowed values''' is parsed, so it is for example possible to transclude a page that contains the actual allowed values, like "<nowiki>{{Setting/select-options}}</nowiki>"
* '''multiple''' is only used by [[Template:Csp formfield/token]] and [[Template:Csp formfield/ask token]]
</div>
<form class="csp-parameter-definitions">
<_edit target="{{FULLPAGENAME}}" mwslot="csp-data" format="json" template="jsonk|CspParameterDefinitions" formfield="CspParameterInstances" />
<_instance name="CspParameterInstances" format="json" default-content="{{#slotdata:csp-data|{{FULLPAGENAME}}|CspParameterDefinitions}}" ><!--
  --><div><!--
  --><input type="text" name="name" placeholder="parameter name" title="Name" /><!--
  --><input type="text" name="propertyName" placeholder="property name" title="Property name" /><!--
  --><select name="slot" placeholder="choose a slot" title="Slotname"><!--
    --><option value="csp-class-props">csp-class-props</option><!--
    --><option value="csp-base-props">csp-base-props</option><!--
  --></select><!--
  --><input type="text" name="allowedValues" placeholder="Allowed values" title="Allowed values" /><!--
  --><select name="required" placeholder="required?" title="Required" ><!--
    --><option value="required">required</option><!--
    --><option value=""></option><!--
  --></select><!--
  --><select name="multiple" placeholder="multiple?" title="Multiple" ><!--
    --><option value="multiple">multiple</option><!--
    --><option value=""></option><!--
  --></select><!--
  --><select name="showOnCreate" placeholder="show on create?" title="Show on create" ><!--
    --><option value="true">true</option><!--
    --><option value="false">false</option><!--
  --></select><!--
  --><_token name="formfieldTemplate" id="formfield-tokens" allowtags="allowtags" placeholder="formfieldTemplate" title="formfieldTemplate" allowclear ><!--
    --><option value=""></option><!--
    --><option value="(none)">(none)</option><!--
    --><option value="Csp formfield/text">Csp formfield/text</option><!--
    --><option value="Csp formfield/textarea">Csp formfield/textarea</option><!--
    --><option value="Csp formfield/number">Csp formfield/number</option><!--
    --><option value="Csp formfield/date">Csp formfield/date</option><!--
    --><option value="Csp formfield/datetimelocal">Csp formfield/datetimelocal</option><!--
    --><option value="Csp formfield/checkbox">Csp formfield/checkbox</option><!--
    --><option value="Csp formfield/select">Csp formfield/select</option><!--
    --><option value="Csp formfield/token">Csp formfield/token</option><!--
    --><option value="Csp formfield/ask token">Csp formfield/ask token</option><!--
  --></_token><!--
  --><_token name="displayTemplate" id="display-tokens" allowtags="allowtags" placeholder="displayTemplate" title="displayTemplate" allowclear ><!--
    --><option value=""></option><!--
    --><option value="(none)">(none)</option><!--
    --><option value="Csp parameter display/date">Csp parameter display/date</option><!--
    --><option value="Csp parameter display/datetime">Csp parameter display/datetime</option><!--
    --><option value="Csp parameter display/link">Csp parameter display/link</option><!--
  --></_token><!--
  // add hidden fields for custom parameter definition fields (if applicable)
  -->{{#if:{{#af_get:{{{$data}}}|var|customParameterDefinitionFields}}|{{#af_foreach:{{#af_get:{{{$data}}}|var|customParameterDefinitionFields}}|$field||<input type="hidden" name="{{{$field}}}" />}} }}<!--
--></div><!--
--></_instance>
<input type="submit" value="Save" class="btn btn-primary" />
</form>
</div><!-- end of .sidebar-edit-tab -->
</div><!-- end of tab-content -->

}}<!-- end of #af_foreach

--></includeonly>