<noinclude>
This is the "Create page form" template.
It should be called in the following format:
<pre>
{{Create page form
|Class options= <text, can be multiple with sep ","> classes that can be selected in the form. If only 1 class is entered, then no select field is shown. Example: "Article, Organization"
}}
</pre>

{{Create page form
}}

</noinclude><includeonly>{{#af_foreach:{{#invoke:CspCreatePageForm|afExport|Class options={{{Class options|}}} }} ||$data|<!--

-->{{#ifeq:{{#af_get:{{{$data}}}|Class options count}} |0 |<span style="color:red">No class definitions for class options found</span>|<!--
--><_form action="addToWiki" show-on-select="{{#ifeq:{{#af_get:{{{$data}}}|Multiple class options check}} |true |show-on-select}}" >
<ul class="list-group list-group-flush">
<li class="list-group-item">{{Csp sidebar item 
  |Label=Title
  |Value=<input name="Title" type="text" placeholder="Title" type="text" value="{{{Title|}}}" class="form-control mb-3" required="required" />
}}<!--

// Class field: select when multiple, hidden when not multiple
-->{{#ifeq:{{#af_get:{{{$data}}}|Multiple class options check}} |true 
|{{Csp sidebar item
  |Label=Class
  |Value=<select name="Class" placeholder="Select page type" class="form-control mb-3" required="required">
      {{#af_foreach:{{#af_get:{{{$data}}}|Class options}}||$class<!--
        -->|<input type="option" value="{{#af_get:{{{$class}}}|Class}}" show-on-select="{{#af_get:{{{$class}}}|Class}}-fields">{{#af_get:{{{$class}}}|Class}}</input>
      }}
      </select>
  }}
|<input type="hidden" name="Class" value="{{#af_get:{{{$data}}}|Class options|1|Class}}" show-on-select="{{#af_get:{{{$class}}}|Class}}-fields" />
}}
</li><!--

--><li class="list-group-item">{{#af_foreach:{{#af_get:{{{$data}}}|Class options}}||$class|<!--

--><div show-on-select-trigger="{{#af_get:{{{$class}}}|Class}}-fields">{{#if: {{#pos: {{#af_get:{{{$class}}}|Namespace options}}|,|}}
  |{{Csp sidebar item 
    |Label=Namespace 
    |Value=<select name="Namespace" class="form-control mb-3" >
      {{#if:{{#pos:{{#af_get:{{{$class}}}|Namespace options}}|(Main)|}}|<input type="option" value="">(none)</input>}}
      {{#af_foreach:{{#af_get:{{{$class}}}|Namespace options array}}||$namespace|<!--
        -->{{#switch:{{{$namespace}}}||(Main)=|#default=<input type="option" value="{{{$namespace}}}">{{{$namespace}}}</input>}}
      }}
      </select>
    }}
  |{{#switch:{{#af_get:{{{$class}}}|Namespace options}}||(Main)=|#default=<input type="hidden" name="Namespace" value="{{#af_get:{{{$class}}}|Namespace options}}" />}}
}}

<_create id="{{#af_get:{{{$class}}}|Class}}-create" mwwrite="{{#af_get:{{{$class}}}|mwwrite}}" mwoption="{{#af_get:{{{$class}}}|mwoption}}" mwtemplate="Base properties" mwslot="csp-base-props" mwfollow mwfields="Title,Class" /><!--
// additional create and fields for "new style" (from CSP 1.8.0) class definition with slots
  -->{{#if:{{#af_get:{{{$class}}}|CspParameterDefinitions}} |<!--
    // loop through parameters for create
    --><_create mwwrite="::id::{{#af_get:{{{$class}}}|Class}}-create" mwtemplate="Csp class properties" mwslot="csp-class-props" 
        mwfields="{{#af_foreach:{{#af_get:{{{$class}}}|CspParameterDefinitions}} ||$parameter|{{#ifeq:{{#af_get:{{{$parameter}}}|slot}}|csp-class-props|{{#ifeq:{{#af_get:{{{$parameter}}}|showOnCreate}}|true|{{#af_get:{{{$parameter}}}|name}},}} }} }}_additionalNonexistingField" 
       /><!-- note: "_additionalNonexistingField" was added because else the _create won't work in cases where mwfields ends up being empty
    // loop through parameters for form fields (only for slot csp-class-props)
    -->{{#af_foreach:{{#af_get:{{{$class}}}|CspParameterDefinitions}}||$parameter|<!--
    -->{{#ifeq:{{#af_get:{{{$parameter}}}|slot}}|csp-class-props|{{#ifeq:{{#af_get:{{{$parameter}}}|showOnCreate}}|true|{{#switch:{{#af_get:{{{$parameter}}}|formfieldTemplate}}
        |(none)=
        |={{Csp sidebar item 
          |Label={{#af_get:{{{$parameter}}}|name}}
          |Value={{#af_template:Csp formfield/text |{{{$parameter}}} }}
          }}
        |#default={{Csp sidebar item 
          |Label={{#af_get:{{{$parameter}}}|name}}
          |Value={{#af_template:{{#af_get:{{{$parameter}}}|formfieldTemplate}} |{{{$parameter}}} }}
          }}
        }}<!-- end of #switch -->}}<!-- end of #ifeq check for showOnCeate -->}}<!-- end of #ifeq check for csp-class-props slot -->
    }}<!-- end of #af_foreach to generate formfields
   
-->}}<!-- end of #if check for CspParameterDefinitions

--></div><!-- end of show-on-select-trigger div 
-->}}<!-- end of #af_foreach $class -->
<div class="text-right"><input type="submit" class="btn btn-primary" value="Submit" /></div>
</li>
</ul>
</_form><!--
-->}}<!-- einde #ifeq Class options count 0
-->}}<!-- end of #af_foreach --></includeonly>